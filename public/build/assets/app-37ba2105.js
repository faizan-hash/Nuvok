import{e as t,f as i,m as o,c as r,L as n}from"./clipboard-8daccd98.js";let Yt="modulepreload",Gt=function(t){return"/build/"+t},gt={},vt=function(t,i,o){if(!i||0===i.length)return t();let r=document.getElementsByTagName("link");return Promise.all(i.map(t=>{if((t=Gt(t))in gt)return;gt[t]=!0;let i=t.endsWith(".css");if(o)for(let n=r.length-1;n>=0;n--){let a=r[n];if(a.href===t&&(!i||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${t}"]${i?'[rel="stylesheet"]':""}`))return;let s=document.createElement("link");if(s.rel=i?"stylesheet":"modulepreload",i||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),i)return new Promise((i,o)=>{s.addEventListener("load",i),s.addEventListener("error",()=>o(Error(`Unable to preload CSS for ${t}`)))})})).then(()=>t()).catch(t=>{let i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=t,window.dispatchEvent(i),!i.defaultPrevented)throw t})};function bt(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),o.push.apply(o,r)}return o}function X(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?bt(Object(o),!0).forEach(function(i){Zt(t,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):bt(Object(o)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))})}return t}function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function Z(){return(Z=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t}).apply(this,arguments)}function Qt(t,i){if(null==t)return{};var o,r,n={},a=Object.keys(t);for(r=0;r<a.length;r++)o=a[r],i.indexOf(o)>=0||(n[o]=t[o]);return n}function Kt(t,i){if(null==t)return{};var o,r,n=Qt(t,i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)o=a[r],!(i.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}"u">typeof window.pusherConfig?vt(()=>import("./echo-4c3fda6b.js"),[]).then(({default:t})=>{vt(()=>import("./pusher-32a7bc32.js").then(t=>t.p),[]).then(({default:i})=>{window.Pusher=i;let o=window.pusherConfig;window.Echo=new t({broadcaster:"pusher",key:o.key,cluster:o.cluster,wsHost:o.wsHost??`ws-${o.cluster}.pusher.com`,wsPort:o.port??80,wssPort:o.port??443,forceTLS:(o.scheme??"https")==="https",enabledTransports:["ws","wss"]})}).catch(t=>console.log("Failed to load Pusher:",t))}).catch(t=>console.log("Failed to load Echo:",t)):console.log("window.pusherConfig is not defined.");var Jt="1.15.2";function G(t){if("u">typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var Q=G(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ke=G(/Edge/i),yt=G(/firefox/i),De=G(/safari/i)&&!G(/chrome/i)&&!G(/android/i),It=G(/iP(ad|od|hone)/i),xt=G(/chrome/i)&&G(/android/i),Pt={capture:!1,passive:!1};function _(t,i,o){t.addEventListener(i,o,!Q&&Pt)}function w(t,i,o){t.removeEventListener(i,o,!Q&&Pt)}function We(t,i){if(i){if(">"===i[0]&&(i=i.substring(1)),t)try{if(t.matches)return t.matches(i);if(t.msMatchesSelector)return t.msMatchesSelector(i);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(i)}catch{}return!1}}function ei(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function H(t,i,o,r){if(t){o=o||document;do{if(null!=i&&(">"===i[0]?t.parentNode===o&&We(t,i):We(t,i))||r&&t===o)return t;if(t===o)break}while(t=ei(t))}return null}var wt=/\s+/g;function L(t,i,o){if(t&&i){if(t.classList)t.classList[o?"add":"remove"](i);else{var r=(" "+t.className+" ").replace(wt," ").replace(" "+i+" "," ");t.className=(r+(o?" "+i:"")).replace(wt," ")}}}function m(t,i,o){var r=t&&t.style;if(r){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===i?o:o[i];i in r||-1!==i.indexOf("webkit")||(i="-webkit-"+i),r[i]=o+("string"==typeof o?"":"px")}}function pe(t,i){var o="";if("string"==typeof t)o=t;else do{var r=m(t,"transform");r&&"none"!==r&&(o=r+" "+o)}while(!i&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(o)}function kt(t,i,o){if(t){var r=t.getElementsByTagName(i),n=0,a=r.length;if(o)for(;n<a;n++)o(r[n],n);return r}return[]}function j(){return document.scrollingElement||document.documentElement}function I(t,i,o,r,n){if(!(!t.getBoundingClientRect&&t!==window)){var a,s,l,c,u,d,p;if(t!==window&&t.parentNode&&t!==j()?(s=(a=t.getBoundingClientRect()).top,l=a.left,c=a.bottom,u=a.right,d=a.height,p=a.width):(s=0,l=0,c=window.innerHeight,u=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(i||o)&&t!==window&&(n=n||t.parentNode,!Q))do if(n&&n.getBoundingClientRect&&("none"!==m(n,"transform")||o&&"static"!==m(n,"position"))){var f=n.getBoundingClientRect();s-=f.top+parseInt(m(n,"border-top-width")),l-=f.left+parseInt(m(n,"border-left-width")),c=s+a.height,u=l+a.width;break}while(n=n.parentNode);if(r&&t!==window){var v=pe(n||t),y=v&&v.a,S=v&&v.d;v&&(s/=S,l/=y,p/=y,d/=S,c=s+d,u=l+p)}return{top:s,left:l,bottom:c,right:u,width:p,height:d}}}function St(t,i,o){for(var r=ie(t,!0),n=I(t)[i];r;){var a=I(r)[o],s=void 0;if(!(s="top"===o||"left"===o?n>=a:n<=a))return r;if(r===j())break;r=ie(r,!1)}return!1}function ve(t,i,o,r){for(var n=0,a=0,s=t.children;a<s.length;){if("none"!==s[a].style.display&&s[a]!==g.ghost&&(r||s[a]!==g.dragged)&&H(s[a],o.draggable,t,!1)){if(n===i)return s[a];n++}a++}return null}function ht(t,i){for(var o=t.lastElementChild;o&&(o===g.ghost||"none"===m(o,"display")||i&&!We(o,i));)o=o.previousElementSibling;return o||null}function q(t,i){var o=0;if(!t||!t.parentNode)return -1;for(;t=t.previousElementSibling;)"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==g.clone&&(!i||We(t,i))&&o++;return o}function _t(t){var i=0,o=0,r=j();if(t)do{var n=pe(t),a=n.a,s=n.d;i+=t.scrollLeft*a,o+=t.scrollTop*s}while(t!==r&&(t=t.parentNode));return[i,o]}function ti(t,i){for(var o in t)if(t.hasOwnProperty(o)){for(var r in i)if(i.hasOwnProperty(r)&&i[r]===t[o][r])return Number(o)}return -1}function ie(t,i){if(!t||!t.getBoundingClientRect)return j();var o=t,r=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var n=m(o);if(o.clientWidth<o.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!o.getBoundingClientRect||o===document.body)return j();if(r||i)return o;r=!0}}while(o=o.parentNode);return j()}function ii(t,i){if(t&&i)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);return t}function Ge(t,i){return Math.round(t.top)===Math.round(i.top)&&Math.round(t.left)===Math.round(i.left)&&Math.round(t.height)===Math.round(i.height)&&Math.round(t.width)===Math.round(i.width)}function Mt(t,i){return function(){if(!Ae){var o=arguments;1===o.length?t.call(this,o[0]):t.apply(this,o),Ae=setTimeout(function(){Ae=void 0},i)}}}function ri(){clearTimeout(Ae),Ae=void 0}function Ot(t,i,o){t.scrollLeft+=i,t.scrollTop+=o}function Nt(t){var i=window.Polymer,o=window.jQuery||window.Zepto;return i&&i.dom?i.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}function Rt(t,i,o){var r={};return Array.from(t.children).forEach(function(n){var a,s,l,c;if(!(!H(n,i.draggable,t,!1)||n.animated||n===o)){var u=I(n);r.left=Math.min(null!==(a=r.left)&&void 0!==a?a:1/0,u.left),r.top=Math.min(null!==(s=r.top)&&void 0!==s?s:1/0,u.top),r.right=Math.max(null!==(l=r.right)&&void 0!==l?l:-1/0,u.right),r.bottom=Math.max(null!==(c=r.bottom)&&void 0!==c?c:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var V="Sortable"+new Date().getTime();function ni(){var t,i=[];return{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if(!("none"===m(t,"display")||t===g.ghost)){i.push({target:t,rect:I(t)});var o=X({},i[i.length-1].rect);if(t.thisAnimationDuration){var r=pe(t,!0);r&&(o.top-=r.f,o.left-=r.e)}t.fromRect=o}})},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(ti(i,{target:t}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),"function"==typeof o&&o();return}var n=!1,a=0;i.forEach(function(t){var i=0,o=t.target,s=o.fromRect,l=I(o),c=o.prevFromRect,u=o.prevToRect,d=t.rect,p=pe(o,!0);p&&(l.top-=p.f,l.left-=p.e),o.toRect=l,o.thisAnimationDuration&&Ge(c,l)&&!Ge(s,l)&&(d.top-l.top)/(d.left-l.left)==(s.top-l.top)/(s.left-l.left)&&(i=ai(d,c,u,r.options)),Ge(l,s)||(o.prevFromRect=s,o.prevToRect=l,i||(i=r.options.animation),r.animate(o,d,l,i)),i&&(n=!0,a=Math.max(a,i),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout(function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null},i),o.thisAnimationDuration=i)}),clearTimeout(t),n?t=setTimeout(function(){"function"==typeof o&&o()},a):"function"==typeof o&&o(),i=[]},animate:function(t,i,o,r){if(r){m(t,"transition",""),m(t,"transform","");var n=pe(this.el),a=n&&n.a,s=n&&n.d,l=(i.left-o.left)/(a||1),c=(i.top-o.top)/(s||1);t.animatingX=!!l,t.animatingY=!!c,m(t,"transform","translate3d("+l+"px,"+c+"px,0)"),this.forRepaintDummy=oi(t),m(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),m(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){m(t,"transition",""),m(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},r)}}}}function oi(t){return t.offsetWidth}function ai(t,i,o,r){return Math.sqrt(Math.pow(i.top-t.top,2)+Math.pow(i.left-t.left,2))/Math.sqrt(Math.pow(i.top-o.top,2)+Math.pow(i.left-o.left,2))*r.animation}var ue=[],Ze={initializeByDefault:!0},Me={mount:function(t){for(var i in Ze)!Ze.hasOwnProperty(i)||i in t||(t[i]=Ze[i]);ue.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ue.push(t)},pluginEvent:function(t,i,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var n=t+"Global";ue.forEach(function(r){i[r.pluginName]&&(i[r.pluginName][n]&&i[r.pluginName][n](X({sortable:i},o)),i.options[r.pluginName]&&i[r.pluginName][t]&&i[r.pluginName][t](X({sortable:i},o)))})},initializePlugins:function(t,i,o,r){for(var n in ue.forEach(function(r){var n=r.pluginName;if(!(!t.options[n]&&!r.initializeByDefault)){var a=new r(t,i,t.options);a.sortable=t,a.options=t.options,t[n]=a,Z(o,a.defaults)}}),t.options)if(t.options.hasOwnProperty(n)){var a=this.modifyOption(t,n,t.options[n]);"u">typeof a&&(t.options[n]=a)}},getEventProperties:function(t,i){var o={};return ue.forEach(function(r){"function"==typeof r.eventProperties&&Z(o,r.eventProperties.call(i[r.pluginName],t))}),o},modifyOption:function(t,i,o){var r;return ue.forEach(function(n){t[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[i]&&(r=n.optionListeners[i].call(t[n.pluginName],o))}),r}};function si(t){var i=t.sortable,o=t.rootEl,r=t.name,n=t.targetEl,a=t.cloneEl,s=t.toEl,l=t.fromEl,c=t.oldIndex,u=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,f=t.originalEvent,v=t.putSortable,y=t.extraEventProperties;if(i=i||o&&o[V]){var S,x=i.options,D="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||Q||ke?(S=document.createEvent("Event")).initEvent(r,!0,!0):S=new CustomEvent(r,{bubbles:!0,cancelable:!0}),S.to=s||o,S.from=l||o,S.item=n||o,S.clone=a,S.oldIndex=c,S.newIndex=u,S.oldDraggableIndex=d,S.newDraggableIndex=p,S.originalEvent=f,S.pullMode=v?v.lastPutMode:void 0;var N=X(X({},y),Me.getEventProperties(r,i));for(var R in N)S[R]=N[R];o&&o.dispatchEvent(S),x[D]&&x[D].call(i,S)}}var li=["evt"],O=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.evt,n=Kt(o,li);Me.pluginEvent.bind(g)(t,i,X({dragEl:h,parentEl:T,ghostEl:b,rootEl:E,nextEl:le,lastDownEl:Ve,cloneEl:C,cloneHidden:te,dragStarted:Ee,putSortable:P,activeSortable:g.active,originalEvent:r,oldIndex:fe,oldDraggableIndex:Ie,newIndex:B,newDraggableIndex:ee,hideGhostForTarget:Vt,unhideGhostForTarget:$t,cloneNowHidden:function(){te=!0},cloneNowShown:function(){te=!1},dispatchSortableEvent:function(t){M({sortable:i,name:t,originalEvent:r})}},n))};function M(t){si(X({putSortable:P,cloneEl:C,targetEl:h,rootEl:E,oldIndex:fe,oldDraggableIndex:Ie,newIndex:B,newDraggableIndex:ee},t))}var Ae,h,T,b,E,le,Ve,C,te,fe,B,Ie,ee,Ne,P,ae,W,Qe,Ke,Et,Ct,Ee,de,xe,$e,k,he=!1,He=!1,Ue=[],Pe=!1,Re=!1,Je=[],at=!1,je=[],Ye="u">typeof document,Fe=It,Tt=ke||Q?"cssFloat":"float",ci=Ye&&!xt&&!It&&"draggable"in document.createElement("div"),Ft=function(){if(Ye){if(Q)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Lt=function(t,i){var o=m(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),n=ve(t,0,i),a=ve(t,1,i),s=n&&m(n),l=a&&m(a),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+I(n).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+I(a).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&s.float&&"none"!==s.float){var d="left"===s.float?"left":"right";return a&&("both"===l.clear||l.clear===d)?"vertical":"horizontal"}return n&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||c>=r&&"none"===o[Tt]||a&&"none"===o[Tt]&&c+u>r)?"vertical":"horizontal"},ui=function(t,i,o){var r=o?t.left:t.top,n=o?t.right:t.bottom,a=o?t.width:t.height,s=o?i.left:i.top,l=o?i.right:i.bottom,c=o?i.width:i.height;return r===s||n===l||r+a/2===s+c/2},di=function(t,i){var o;return Ue.some(function(r){var n=r[V].options.emptyInsertThreshold;if(!(!n||ht(r))){var a=I(r),s=t>=a.left-n&&t<=a.right+n,l=i>=a.top-n&&i<=a.bottom+n;if(s&&l)return o=r}}),o},Bt=function(t){function i(t,o){return function(r,n,a,s){var l=r.options.group.name&&n.options.group.name&&r.options.group.name===n.options.group.name;if(null==t&&(o||l))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"==typeof t)return i(t(r,n,a,s),o)(r,n,a,s);var c=(o?r:n).options.group.name;return!0===t||"string"==typeof t&&t===c||t.join&&t.indexOf(c)>-1}}var o={},r=t.group;r&&"object"==Be(r)||(r={name:r}),o.name=r.name,o.checkPull=i(r.pull,!0),o.checkPut=i(r.put),o.revertClone=r.revertClone,t.group=o},Vt=function(){!Ft&&b&&m(b,"display","none")},$t=function(){!Ft&&b&&m(b,"display","")};Ye&&!xt&&document.addEventListener("click",function(t){if(He)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),He=!1,!1},!0);var se=function(t){if(h){var i=di((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(i){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o.target=o.rootEl=i,o.preventDefault=void 0,o.stopPropagation=void 0,i[V]._onDragOver(o)}}},hi=function(t){h&&h.parentNode[V]._isOutsideThisEl(t.target)};function g(t,i){if(!(t&&t.nodeType&&1===t.nodeType))throw"Sortable: `el` must be an HTMLElement, not ".concat(({}).toString.call(t));this.el=t,this.options=i=Z({},i),t[V]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Lt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,i){t.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==g.supportPointer&&"PointerEvent"in window&&!De,emptyInsertThreshold:5};for(var r in Me.initializePlugins(this,t,o),o)r in i||(i[r]=o[r]);for(var n in Bt(i),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!i.forceFallback&&ci,this.nativeDraggable&&(this.options.touchStartThreshold=1),i.supportPointer?_(t,"pointerdown",this._onTapStart):(_(t,"mousedown",this._onTapStart),_(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(_(t,"dragover",this),_(t,"dragenter",this)),Ue.push(this.el),i.store&&i.store.get&&this.sort(i.store.get(this)||[]),Z(this,ni())}function fi(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Le(t,i,o,r,n,a,s,l){var c,u,d=t[V],p=d.options.onMove;return!window.CustomEvent||Q||ke?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=i,c.from=t,c.dragged=o,c.draggedRect=r,c.related=n||i,c.relatedRect=a||I(i),c.willInsertAfter=l,c.originalEvent=s,t.dispatchEvent(c),p&&(u=p.call(d,c,s)),u}function et(t){t.draggable=!1}function pi(){at=!1}function mi(t,i,o){var r=I(ve(o.el,0,o.options,!0)),n=Rt(o.el,o.options,b);return i?t.clientX<n.left-10||t.clientY<r.top&&t.clientX<r.right:t.clientY<n.top-10||t.clientY<r.bottom&&t.clientX<r.left}function gi(t,i,o){var r=I(ht(o.el,o.options.draggable)),n=Rt(o.el,o.options,b);return i?t.clientX>n.right+10||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>n.bottom+10||t.clientX>r.right&&t.clientY>r.top}function vi(t,i,o,r,n,a,s,l){var c=r?t.clientY:t.clientX,u=r?o.height:o.width,d=r?o.top:o.left,p=r?o.bottom:o.right,f=!1;if(!s){if(l&&$e<u*n){if(!Pe&&(1===xe?c>d+u*a/2:c<p-u*a/2)&&(Pe=!0),Pe)f=!0;else if(1===xe?c<d+$e:c>p-$e)return-xe}else if(c>d+u*(1-n)/2&&c<p-u*(1-n)/2)return bi(i)}return(f=f||s)&&(c<d+u*a/2||c>p-u*a/2)?c>d+u/2?1:-1:0}function bi(t){return q(h)<q(t)?1:-1}function yi(t){for(var i=t.tagName+t.className+t.src+t.href+t.textContent,o=i.length,r=0;o--;)r+=i.charCodeAt(o);return r.toString(36)}function wi(t){je.length=0;for(var i=t.getElementsByTagName("input"),o=i.length;o--;){var r=i[o];r.checked&&je.push(r)}}function qe(t){return setTimeout(t,0)}function st(t){return clearTimeout(t)}g.prototype={constructor:g,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(de=null)},_getDirection:function(t,i){return"function"==typeof this.options.direction?this.options.direction.call(this,t,i,h):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,o=this.el,r=this.options,n=r.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(s||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=r.filter;if(wi(o),!h&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&De&&l&&"SELECT"===l.tagName.toUpperCase())&&!((l=H(l,r.draggable,o,!1))&&l.animated)&&Ve!==l){if(fe=q(l),Ie=q(l,r.draggable),"function"==typeof u){if(u.call(this,t,l,this)){M({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:o,fromEl:o}),O("filter",i,{evt:t}),n&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(r){if(r=H(c,r.trim(),o,!1))return M({sortable:i,rootEl:r,name:"filter",targetEl:l,fromEl:o,toEl:o}),O("filter",i,{evt:t}),!0}))){n&&t.cancelable&&t.preventDefault();return}r.handle&&!H(c,r.handle,o,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,i,o){var r,n=this,a=n.el,s=n.options,l=a.ownerDocument;if(o&&!h&&o.parentNode===a){var c=I(o);if(E=a,T=(h=o).parentNode,le=h.nextSibling,Ve=o,Ne=s.group,g.dragged=h,Et=(ae={target:h,clientX:(i||t).clientX,clientY:(i||t).clientY}).clientX-c.left,Ct=ae.clientY-c.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,h.style["will-change"]="all",r=function(){if(O("delayEnded",n,{evt:t}),g.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!yt&&n.nativeDraggable&&(h.draggable=!0),n._triggerDragStart(t,i),M({sortable:n,name:"choose",originalEvent:t}),L(h,s.chosenClass,!0)},s.ignore.split(",").forEach(function(t){kt(h,t.trim(),et)}),_(l,"dragover",se),_(l,"mousemove",se),_(l,"touchmove",se),_(l,"mouseup",n._onDrop),_(l,"touchend",n._onDrop),_(l,"touchcancel",n._onDrop),yt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),O("delayStart",this,{evt:t}),!s.delay||s.delayOnTouchOnly&&!i||this.nativeDraggable&&(ke||Q))r();else{if(g.eventCanceled){this._onDrop();return}_(l,"mouseup",n._disableDelayedDrag),_(l,"touchend",n._disableDelayedDrag),_(l,"touchcancel",n._disableDelayedDrag),_(l,"mousemove",n._delayedDragTouchMoveHandler),_(l,"touchmove",n._delayedDragTouchMoveHandler),s.supportPointer&&_(l,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(r,s.delay)}}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&et(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;w(t,"mouseup",this._disableDelayedDrag),w(t,"touchend",this._disableDelayedDrag),w(t,"touchcancel",this._disableDelayedDrag),w(t,"mousemove",this._delayedDragTouchMoveHandler),w(t,"touchmove",this._delayedDragTouchMoveHandler),w(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||"touch"==t.pointerType&&t,!this.nativeDraggable||i?this.options.supportPointer?_(document,"pointermove",this._onTouchMove):i?_(document,"touchmove",this._onTouchMove):_(document,"mousemove",this._onTouchMove):(_(h,"dragend",this),_(E,"dragstart",this._onDragStart));try{document.selection?qe(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,i){if(he=!1,E&&h){O("dragStarted",this,{evt:i}),this.nativeDraggable&&_(document,"dragover",hi);var o=this.options;t||L(h,o.dragClass,!1),L(h,o.ghostClass,!0),g.active=this,t&&this._appendGhost(),M({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(W){this._lastX=W.clientX,this._lastY=W.clientY,Vt();for(var t=document.elementFromPoint(W.clientX,W.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(W.clientX,W.clientY))!==i;)i=t;if(h.parentNode[V]._isOutsideThisEl(t),i)do{if(i[V]){var o=void 0;if((o=i[V]._onDragOver({clientX:W.clientX,clientY:W.clientY,target:t,rootEl:i}))&&!this.options.dragoverBubble)break}t=i}while(i=i.parentNode);$t()}},_onTouchMove:function(t){if(ae){var i=this.options,o=i.fallbackTolerance,r=i.fallbackOffset,n=t.touches?t.touches[0]:t,a=b&&pe(b,!0),s=b&&a&&a.a,l=b&&a&&a.d,c=Fe&&k&&_t(k),u=(n.clientX-ae.clientX+r.x)/(s||1)+(c?c[0]-Je[0]:0)/(s||1),d=(n.clientY-ae.clientY+r.y)/(l||1)+(c?c[1]-Je[1]:0)/(l||1);if(!g.active&&!he){if(o&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(b){a?(a.e+=u-(Qe||0),a.f+=d-(Ke||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var p="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");m(b,"webkitTransform",p),m(b,"mozTransform",p),m(b,"msTransform",p),m(b,"transform",p),Qe=u,Ke=d,W=n}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!b){var t=this.options.fallbackOnBody?document.body:E,i=I(h,!0,Fe,!0,t),o=this.options;if(Fe){for(k=t;"static"===m(k,"position")&&"none"===m(k,"transform")&&k!==document;)k=k.parentNode;k!==document.body&&k!==document.documentElement?(k===document&&(k=j()),i.top+=k.scrollTop,i.left+=k.scrollLeft):k=j(),Je=_t(k)}L(b=h.cloneNode(!0),o.ghostClass,!1),L(b,o.fallbackClass,!0),L(b,o.dragClass,!0),m(b,"transition",""),m(b,"transform",""),m(b,"box-sizing","border-box"),m(b,"margin",0),m(b,"top",i.top),m(b,"left",i.left),m(b,"width",i.width),m(b,"height",i.height),m(b,"opacity","0.8"),m(b,"position",Fe?"absolute":"fixed"),m(b,"zIndex","100000"),m(b,"pointerEvents","none"),g.ghost=b,t.appendChild(b),m(b,"transform-origin",Et/parseInt(b.style.width)*100+"% "+Ct/parseInt(b.style.height)*100+"%")}},_onDragStart:function(t,i){var o=this,r=t.dataTransfer,n=o.options;if(O("dragStart",this,{evt:t}),g.eventCanceled){this._onDrop();return}O("setupClone",this),g.eventCanceled||((C=Nt(h)).removeAttribute("id"),C.draggable=!1,C.style["will-change"]="",this._hideClone(),L(C,this.options.chosenClass,!1),g.clone=C),o.cloneId=qe(function(){O("clone",o),g.eventCanceled||(o.options.removeCloneOnHide||E.insertBefore(C,h),o._hideClone(),M({sortable:o,name:"clone"}))}),i||L(h,n.dragClass,!0),i?(He=!0,o._loopId=setInterval(o._emulateDragOver,50)):(w(document,"mouseup",o._onDrop),w(document,"touchend",o._onDrop),w(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",n.setData&&n.setData.call(o,r,h)),_(document,"drop",o),m(h,"transform","translateZ(0)")),he=!0,o._dragStartId=qe(o._dragStarted.bind(o,i,t)),_(document,"selectstart",o),Ee=!0,De&&m(document.body,"user-select","none")},_onDragOver:function(t){var i,o,r,n,a=this.el,s=t.target,l=this.options,c=l.group,u=g.active,d=Ne===c,p=l.sort,f=P||u,v=this,y=!1;if(!at){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),s=H(s,l.draggable,a,!0),ea("dragOver"),g.eventCanceled)return y;if(h.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||v._ignoreWhileAnimating===s)return el(!1);if(He=!1,u&&!l.disabled&&(d?p||(r=T!==E):P===this||(this.lastPutMode=Ne.checkPull(this,u,h,t))&&c.checkPut(this,u,h,t))){if(n="vertical"===this._getDirection(t,s),i=I(h),ea("dragOverValid"),g.eventCanceled)return y;if(r)return T=E,es(),this._hideClone(),ea("revert"),g.eventCanceled||(le?E.insertBefore(h,le):E.appendChild(h)),el(!0);var S=ht(a,l.draggable);if(!S||gi(t,n,this)&&!S.animated){if(S===h)return el(!1);if(S&&a===t.target&&(s=S),s&&(o=I(s)),!1!==Le(E,a,h,i,s,o,t,!!s))return es(),S&&S.nextSibling?a.insertBefore(h,S.nextSibling):a.appendChild(h),T=a,ec(),el(!0)}else if(S&&mi(t,n,this)){var x=ve(a,0,l,!0);if(x===h)return el(!1);if(s=x,o=I(s),!1!==Le(E,a,h,i,s,o,t,!1))return es(),a.insertBefore(h,x),T=a,ec(),el(!0)}else if(s.parentNode===a){o=I(s);var D,N,R=0,F=h.parentNode!==a,z=!ui(h.animated&&h.toRect||i,s.animated&&s.toRect||o,n),Y=n?"top":"left",U=St(s,"top","top")||St(h,"top","top"),K=U?U.scrollTop:void 0;if(de!==s&&(N=o[Y],Pe=!1,Re=!z&&l.invertSwap||F),0!==(R=vi(t,s,o,n,z?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Re,de===s))){var J=q(h);do J-=R,D=T.children[J];while(D&&("none"===m(D,"display")||D===b))}if(0===R||D===s)return el(!1);de=s,xe=R;var eo=s.nextElementSibling,er=!1,en=Le(E,a,h,i,s,o,t,er=1===R);if(!1!==en)return(1===en||-1===en)&&(er=1===en),at=!0,setTimeout(pi,30),es(),er&&!eo?a.appendChild(h):s.parentNode.insertBefore(h,er?eo:s),U&&Ot(U,0,K-U.scrollTop),T=h.parentNode,void 0===N||Re||($e=Math.abs(N-I(s)[Y])),ec(),el(!0)}if(a.contains(h))return el(!1)}return!1}function ea(l,c){O(l,v,X({evt:t,isOwner:d,axis:n?"vertical":"horizontal",revert:r,dragRect:i,targetRect:o,canSort:p,fromSortable:f,target:s,completed:el,onMove:function(o,r){return Le(E,a,h,i,o,I(o),t,r)},changed:ec},c))}function es(){ea("dragOverAnimationCapture"),v.captureAnimationState(),v!==f&&f.captureAnimationState()}function el(i){return ea("dragOverCompleted",{insertion:i}),i&&(d?u._hideClone():u._showClone(v),v!==f&&(L(h,P?P.options.ghostClass:u.options.ghostClass,!1),L(h,l.ghostClass,!0)),P!==v&&v!==g.active?P=v:v===g.active&&P&&(P=null),f===v&&(v._ignoreWhileAnimating=s),v.animateAll(function(){ea("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(s!==h||h.animated)&&(s!==a||s.animated)||(de=null),l.dragoverBubble||t.rootEl||s===document||(h.parentNode[V]._isOutsideThisEl(t.target),i||se(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),y=!0}function ec(){B=q(h),ee=q(h,l.draggable),M({sortable:v,name:"change",toEl:a,newIndex:B,newDraggableIndex:ee,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){w(document,"mousemove",this._onTouchMove),w(document,"touchmove",this._onTouchMove),w(document,"pointermove",this._onTouchMove),w(document,"dragover",se),w(document,"mousemove",se),w(document,"touchmove",se)},_offUpEvents:function(){var t=this.el.ownerDocument;w(t,"mouseup",this._onDrop),w(t,"touchend",this._onDrop),w(t,"pointerup",this._onDrop),w(t,"touchcancel",this._onDrop),w(document,"selectstart",this)},_onDrop:function(t){var i=this.el,o=this.options;if(B=q(h),ee=q(h,o.draggable),O("drop",this,{evt:t}),T=h&&h.parentNode,B=q(h),ee=q(h,o.draggable),g.eventCanceled){this._nulling();return}he=!1,Re=!1,Pe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),st(this.cloneId),st(this._dragStartId),this.nativeDraggable&&(w(document,"drop",this),w(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),De&&m(document.body,"user-select",""),m(h,"transform",""),t&&(Ee&&(t.cancelable&&t.preventDefault(),o.dropBubble||t.stopPropagation()),b&&b.parentNode&&b.parentNode.removeChild(b),(E===T||P&&"clone"!==P.lastPutMode)&&C&&C.parentNode&&C.parentNode.removeChild(C),h&&(this.nativeDraggable&&w(h,"dragend",this),et(h),h.style["will-change"]="",Ee&&!he&&L(h,P?P.options.ghostClass:this.options.ghostClass,!1),L(h,this.options.chosenClass,!1),M({sortable:this,name:"unchoose",toEl:T,newIndex:null,newDraggableIndex:null,originalEvent:t}),E!==T?(B>=0&&(M({rootEl:T,name:"add",toEl:T,fromEl:E,originalEvent:t}),M({sortable:this,name:"remove",toEl:T,originalEvent:t}),M({rootEl:T,name:"sort",toEl:T,fromEl:E,originalEvent:t}),M({sortable:this,name:"sort",toEl:T,originalEvent:t})),P&&P.save()):B!==fe&&B>=0&&(M({sortable:this,name:"update",toEl:T,originalEvent:t}),M({sortable:this,name:"sort",toEl:T,originalEvent:t})),g.active&&((null==B||-1===B)&&(B=fe,ee=Ie),M({sortable:this,name:"end",toEl:T,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){O("nulling",this),E=h=T=b=le=C=Ve=te=ae=W=Ee=B=ee=fe=Ie=de=xe=P=Ne=g.dragged=g.ghost=g.clone=g.active=null,je.forEach(function(t){t.checked=!0}),je.length=Qe=Ke=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":h&&(this._onDragOver(t),fi(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,i=[],o=this.el.children,r=0,n=o.length,a=this.options;r<n;r++)H(t=o[r],a.draggable,this.el,!1)&&i.push(t.getAttribute(a.dataIdAttr)||yi(t));return i},sort:function(t,i){var o={},r=this.el;this.toArray().forEach(function(t,i){var n=r.children[i];H(n,this.options.draggable,r,!1)&&(o[t]=n)},this),i&&this.captureAnimationState(),t.forEach(function(t){o[t]&&(r.removeChild(o[t]),r.appendChild(o[t]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return H(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var o=this.options;if(void 0===i)return o[t];var r=Me.modifyOption(this,t,i);"u">typeof r?o[t]=r:o[t]=i,"group"===t&&Bt(o)},destroy:function(){O("destroy",this);var t=this.el;t[V]=null,w(t,"mousedown",this._onTapStart),w(t,"touchstart",this._onTapStart),w(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(w(t,"dragover",this),w(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ue.splice(Ue.indexOf(this.el),1),this.el=t=null},_hideClone:function(){te||(O("hideClone",this),g.eventCanceled||(m(C,"display","none"),this.options.removeCloneOnHide&&C.parentNode&&C.parentNode.removeChild(C),te=!0))},_showClone:function(t){if("clone"!==t.lastPutMode){this._hideClone();return}if(te){if(O("showClone",this),g.eventCanceled)return;h.parentNode!=E||this.options.group.revertClone?le?E.insertBefore(C,le):E.appendChild(C):E.insertBefore(C,h),this.options.group.revertClone&&this.animate(h,C),m(C,"display",""),te=!1}}},Ye&&_(document,"touchmove",function(t){(g.active||he)&&t.cancelable&&t.preventDefault()}),g.utils={on:_,off:w,css:m,find:kt,is:function(t,i){return!!H(t,i,t,!1)},extend:ii,throttle:Mt,closest:H,toggleClass:L,clone:Nt,index:q,nextTick:qe,cancelNextTick:st,detectDirection:Lt,getChild:ve},g.get=function(t){return t[V]},g.mount=function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];i[0].constructor===Array&&(i=i[0]),i.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat(({}).toString.call(t));t.utils&&(g.utils=X(X({},g.utils),t.utils)),Me.mount(t)})},g.create=function(t,i){return new g(t,i)},g.version=Jt;var Ce,lt,tt,it,Xe,Te,A=[],ct=!1;function Si(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_(document,"pointermove",this._handleFallbackAutoScroll):i.touches?_(document,"touchmove",this._handleFallbackAutoScroll):_(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;this.options.dragOverBubble||i.rootEl||this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):(w(document,"pointermove",this._handleFallbackAutoScroll),w(document,"touchmove",this._handleFallbackAutoScroll),w(document,"mousemove",this._handleFallbackAutoScroll)),Dt(),ze(),ri()},nulling:function(){Xe=lt=Ce=ct=Te=tt=it=null,A.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var o=this,r=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(r,n);if(Xe=t,i||this.options.forceAutoScrollFallback||ke||Q||De){rt(t,this.options,a,i);var s=ie(a,!0);ct&&(!Te||r!==tt||n!==it)&&(Te&&Dt(),Te=setInterval(function(){var a=ie(document.elementFromPoint(r,n),!0);a!==s&&(s=a,ze()),rt(t,o.options,a,i)},10),tt=r,it=n)}else{if(!this.options.bubbleScroll||ie(a,!0)===j()){ze();return}rt(t,this.options,ie(a,!1),!1)}}},Z(t,{pluginName:"scroll",initializeByDefault:!0})}function ze(){A.forEach(function(t){clearInterval(t.pid)}),A=[]}function Dt(){clearInterval(Te)}var rt=Mt(function(t,i,o,r){if(i.scroll){var n,a=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,l=i.scrollSensitivity,c=i.scrollSpeed,u=j(),d=!1;lt!==o&&(lt=o,ze(),Ce=i.scroll,n=i.scrollFn,!0===Ce&&(Ce=ie(o,!0)));var p=0,f=Ce;do{var v=f,y=I(v),S=y.top,x=y.bottom,D=y.left,N=y.right,R=y.width,F=y.height,z=void 0,Y=void 0,U=v.scrollWidth,K=v.scrollHeight,J=m(v),eo=v.scrollLeft,er=v.scrollTop;v===u?(z=R<U&&("auto"===J.overflowX||"scroll"===J.overflowX||"visible"===J.overflowX),Y=F<K&&("auto"===J.overflowY||"scroll"===J.overflowY||"visible"===J.overflowY)):(z=R<U&&("auto"===J.overflowX||"scroll"===J.overflowX),Y=F<K&&("auto"===J.overflowY||"scroll"===J.overflowY));var en=z&&(Math.abs(N-a)<=l&&eo+R<U)-(Math.abs(D-a)<=l&&!!eo),ea=Y&&(Math.abs(x-s)<=l&&er+F<K)-(Math.abs(S-s)<=l&&!!er);if(!A[p])for(var es=0;es<=p;es++)A[es]||(A[es]={});(A[p].vx!=en||A[p].vy!=ea||A[p].el!==v)&&(A[p].el=v,A[p].vx=en,A[p].vy=ea,clearInterval(A[p].pid),(0!=en||0!=ea)&&(d=!0,A[p].pid=setInterval((function(){r&&0===this.layer&&g.active._onTouchMove(Xe);var i=A[this.layer].vy?A[this.layer].vy*c:0,o=A[this.layer].vx?A[this.layer].vx*c:0;"function"==typeof n&&"continue"!==n.call(g.dragged.parentNode[V],o,i,t,Xe,A[this.layer].el)||Ot(A[this.layer].el,o,i)}).bind({layer:p}),24))),p++}while(i.bubbleScroll&&f!==u&&(f=ie(f,!1)));ct=d}},30),qt=function(t){var i=t.originalEvent,o=t.putSortable,r=t.dragEl,n=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(i){var c=o||n;s();var u=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function ft(){}function pt(){}ft.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=ve(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(i,r):this.sortable.el.appendChild(i),this.sortable.animateAll(),o&&o.animateAll()},drop:qt},Z(ft,{pluginName:"revertOnSpill"}),pt.prototype={onSpill:function(t){var i=t.dragEl,o=t.putSortable||this.sortable;o.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),o.animateAll()},drop:qt},Z(pt,{pluginName:"removeOnSpill"}),g.mount(new Si),g.mount(pt,ft);var _i=g;function Ei(t){t.directive("sort",(t,{value:i,modifiers:o,expression:r},{effect:n,evaluate:a,evaluateLater:s,cleanup:l})=>{if("config"===i||"handle"===i||"group"===i)return;if("key"===i||"item"===i){if([void 0,null,""].includes(r))return;t._x_sort_key=a(r);return}let c={hideGhost:!o.includes("ghost"),useHandles:!!t.querySelector("[x-sort\\:handle]"),group:Ii(t,o)},u=Ci(r,s),d=Ti(t,o,a),p=Di(t,d,c,(t,i)=>{u(t,i)});l(()=>p.destroy())})}function Ci(t,i){if([void 0,null,""].includes(t))return()=>{};let o=i(t);return(t,i)=>{Alpine.dontAutoEvaluateFunctions(()=>{o(o=>{"function"==typeof o&&o(t,i)},{scope:{$key:t,$item:t,$position:i}})})}}function Ti(t,i,o){return t.hasAttribute("x-sort:config")?o(t.getAttribute("x-sort:config")):{}}function Di(t,i,o,r){let n,a={animation:150,handle:o.useHandles?"[x-sort\\:handle]":null,group:o.group,filter:i=>!!t.querySelector("[x-sort\\:item]")&&!i.target.closest("[x-sort\\:item]"),onSort(t){if(t.from!==t.to&&t.to!==t.target)return;let i=t.item._x_sort_key,o=t.newIndex;(void 0!==i||null!==i)&&r(i,o)},onStart(){document.body.classList.add("sorting"),n=document.querySelector(".sortable-ghost"),o.hideGhost&&n&&(n.style.opacity="0")},onEnd(){document.body.classList.remove("sorting"),o.hideGhost&&n&&(n.style.opacity="1"),n=void 0,Ai(t)}};return new _i(t,{...a,...i})}function Ai(t){let i=t.firstChild;for(;i.nextSibling;){if("[if ENDBLOCK]><![endif]"===i.textContent.trim()){t.append(i);break}i=i.nextSibling}}function Ii(t,i){return t.hasAttribute("x-sort:group")?t.getAttribute("x-sort:group"):-1!==i.indexOf("group")?i[i.indexOf("group")+1]:null}var xi=Ei; /*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.2
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/ function Pi(t={show:!1,focusable:!1}){return{show:t.show,focusable:t.focusable,closeModal(){this.show=!1},openModal(){this.show=!0},focusables(){return[...this.$el.querySelectorAll("a, button, input:not([type='hidden']), textarea, select, details, [tabindex]:not([tabindex='-1'])")].filter(t=>!t.hasAttribute("disabled"))},firstFocusable(){return this.focusables()[0]},lastFocusable(){return this.focusables().slice(-1)[0]},nextFocusable(){return this.focusables()[this.nextFocusableIndex()]||this.firstFocusable()},prevFocusable(){return this.focusables()[this.prevFocusableIndex()]||this.lastFocusable()},nextFocusableIndex(){return(this.focusables().indexOf(document.activeElement)+1)%(this.focusables().length+1)},prevFocusableIndex(){return Math.max(0,this.focusables().indexOf(document.activeElement))-1},init(){this.$watch("show",t=>{t?(document.body.classList.add("overflow-y-hidden"),!1!==this.focusable&&setTimeout(()=>this.firstFocusable().focus(),100)):document.body.classList.remove("overflow-y-hidden")})}}}function ki(t={}){return{isShared:t.isShared??!1,limits:t.limits??{},init(){},pushToAiEngines(t){this.aiEngines.push(t)}}}class Mi{constructor(){this.playbackNode=null}async init(t){this.audioContext=new AudioContext({sampleRate:t}),await this.audioContext.audioWorklet.addModule("/themes/default/assets/js/audio/playback-worklet.js"),this.playbackNode=new AudioWorkletNode(this.audioContext,"playback-worklet"),this.playbackNode.connect(this.audioContext.destination)}play(t){this.playbackNode&&this.playbackNode.port.postMessage(t)}clear(){this.playbackNode&&this.playbackNode.port.postMessage(null)}}class Oi{constructor(t){this.onDataAvailable=t,this.audioContext=null,this.mediaStream=null,this.mediaStreamSource=null,this.workletNode=null}async start(t){try{this.audioContext=new AudioContext({sampleRate:24e3}),await this.audioContext.audioWorklet.addModule("/themes/default/assets/js/audio/audio-worklet-processor.js"),this.mediaStream=t,this.mediaStreamSource=this.audioContext.createMediaStreamSource(this.mediaStream),this.workletNode=new AudioWorkletNode(this.audioContext,"audio-worklet-processor"),this.workletNode.port.onmessage=t=>this.onDataAvailable(t.data.buffer),this.mediaStreamSource.connect(this.workletNode)}catch(i){console.error("Error in recorder start:",i),this.stop()}}stop(){this.mediaStream&&this.mediaStream.getTracks().forEach(t=>t.stop()),this.audioContext&&"closed"!==this.audioContext.state&&this.audioContext.close()}getMediaStreamSource(){return this.mediaStreamSource}}function me(t,i,o,r){return new(o||(o=Promise))(function(n,a){function s(t){try{c(r.next(t))}catch(i){a(i)}}function l(t){try{c(r.throw(t))}catch(i){a(i)}}function c(t){var i;t.done?n(t.value):((i=t.value)instanceof o?i:new o(function(t){t(i)})).then(s,l)}c((r=r.apply(t,i||[])).next())})}function ce(t,i){var o,r,n,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(c){return function l(c){if(o)throw TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(a=0)),a;)try{if(o=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){a.label=c[1];break}if(6===c[0]&&a.label<n[1]){a.label=n[1],n=c;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(c);break}n[2]&&a.ops.pop(),a.trys.pop();continue}c=i.call(t,a)}catch(u){c=[6,u],r=0}finally{o=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,c])}}}function At(t){var i="function"==typeof Symbol&&Symbol.iterator,o=i&&t[i],r=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function nt(t,i){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var r,n,a=o.call(t),s=[];try{for(;(void 0===i||i-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(l){n={error:l}}finally{try{r&&!r.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return s}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function Ni(t,i,o){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,n=o.apply(t,i||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function t(i){return function(t){return Promise.resolve(t).then(i,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(t,i){n[t]&&(r[t]=function(i){return new Promise(function(o,r){a.push([t,i,o,r])>1||l(t,i)})},i&&(r[t]=i(r[t])))}function l(t,i){try{var o;o=n[t](i),o.value instanceof ge?Promise.resolve(o.value.v).then(c,u):d(a[0][2],o)}catch(r){d(a[0][3],r)}}function c(t){l("next",t)}function u(t){l("throw",t)}function d(t,i){t(i),a.shift(),a.length&&l(a[0][0],a[0][1])}}function Ri(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,o=t[Symbol.asyncIterator];return o?o.call(t):(t=At(t),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(o){i[o]=t[o]&&function(i){return new Promise(function(r,n){!function t(i,o,r,n){Promise.resolve(n).then(function(t){i({value:t,done:r})},o)}(r,n,(i=t[o](i)).done,i.value)})}}}var Fi=function(t){return"object"==typeof t&&null!==t&&"type"in t},Li=function(t){return Fi(t)&&["error","session.created","session.updated","input_audio_buffer.committed","input_audio_buffer.cleared","input_audio_buffer.speech_started","input_audio_buffer.speech_stopped","conversation.item.created","conversation.item.truncated","conversation.item.deleted","conversation.item.input_audio_transcription.completed","conversation.item.input_audio_transcription.failed","response.created","response.done","response.output_item.added","response.output_item.done","response.content_part.added","response.content_part.done","response.text.delta","response.text.done","response.audio_transcript.delta","response.audio_transcript.done","response.audio.delta","response.audio.done","response.function_call_arguments.delta","response.function_call_arguments.done","rate_limits.updated"].includes(t.type)},Bi=WebSocket,Vi=function(t,i){return t.readyState!==WebSocket.OPEN?Promise.reject(Error("Socket is not open")):(t.send(i),Promise.resolve())},$i=function(t){return{success:!0,message:t}},ot=function(t){return{success:!1,error:t}},qi=function(t){return t.success},zi=function(){function t(t,i){var o=this;this.closedPromise=void 0,this.messageQueue=[],this.receiverQueue=[],this.done=!1,this.validate=i.validate,this.serialize=i.serialize,this.connectedPromise=new Promise(function(i,r){return me(o,void 0,void 0,function(){var o,n,a,s,l=this;return ce(this,function(c){switch(c.label){case 0:return void 0!==t.policy?[3,1]:(s=t,[3,3]);case 1:return[4,t.policy(t)];case 2:s=c.sent(),c.label=3;case 3:return n=(o=s).uri,a=o.protocols,this.socket=new Bi(n.toString(),a),this.socket.onopen=function(){l.socket.onmessage=l.getMessageHandler(),l.closedPromise=new Promise(function(t){l.socket.onclose=l.getClosedHandler(t)}),l.socket.onerror=l.handleError,i()},this.socket.onerror=function(t){l.error=t.error,r(t)},[2]}})})})}return t.prototype.handleError=function(t){for(this.error=t.error;this.receiverQueue.length>0;){var i=nt(this.receiverQueue.shift(),2);i[0],(0,i[1])(t.error)}},t.prototype.getClosedHandler=function(t){var i=this;return function(o){for(i.done=!0;i.receiverQueue.length>0;){var r=nt(i.receiverQueue.shift(),2),n=r[0],a=r[1];i.error?a(i.error):n({value:void 0,done:!0})}t()}},t.prototype.getMessageHandler=function(){var t=this;return function(i){var o=t.validate(i);if(qi(o)){var r=o.message;if(t.receiverQueue.length>0){var n=nt(t.receiverQueue.shift(),2),a=n[0];n[1],a({value:r,done:!1})}else t.messageQueue.push(r)}else t.error=o.error,t.socket.close(1e3,"Unexpected message received")}},t.prototype[Symbol.asyncIterator]=function(){var t=this;return{next:function(){return t.error?Promise.reject(t.error):t.done?Promise.resolve({value:void 0,done:!0}):t.messageQueue.length>0?Promise.resolve({value:t.messageQueue.shift(),done:!1}):new Promise(function(i,o){t.receiverQueue.push([i,o])})}}},t.prototype.send=function(t){return me(this,void 0,void 0,function(){var i;return ce(this,function(o){switch(o.label){case 0:return[4,this.connectedPromise];case 1:if(o.sent(),this.error)throw this.error;return i=this.serialize(t),[2,Vi(this.socket,i)]}})})},t.prototype.close=function(){return me(this,void 0,void 0,function(){return ce(this,function(t){switch(t.label){case 0:return[4,this.connectedPromise];case 1:return t.sent(),this.done?[2]:(this.socket.close(),[4,this.closedPromise]);case 2:return t.sent(),[2]}})})},t}();function ut(t){return"object"==typeof t&&null!==t&&"key"in t&&"string"==typeof t.key}function Wi(t){return"object"==typeof t&&null!==t&&"getToken"in t&&"function"==typeof t.getToken}var Hi=function(t){return ut(t)||Wi(t)},Ui=function(t){return"object"==typeof t&&null!==t&&"model"in t&&"string"==typeof t.model},ji=function(t){return"object"==typeof t&&null!==t&&"deployment"in t&&"string"==typeof t.deployment},Xi=function(){function t(t,i,o){var r=this,n=function(){if(ut(t)&&Ui(i))return r.openAISettings(t,i);if(Hi(i)&&ji(o))return r.azureOpenAISettings(t,i,o);throw Error("Invalid combination of arguments to initialize the Realtime client")}();this.client=this.getWebsocket(n)}return t.prototype.azureOpenAISettings=function(t,i,o){var r=this,n=["https://cognitiveservices.azure.com/.default"];return this.requestId=crypto.randomUUID(),t.searchParams.set("api-version","2024-10-01-preview"),t.searchParams.set("x-ms-client-request-id",this.requestId),t.searchParams.set("deployment",o.deployment),t.pathname="openai/realtime",{uri:t,policy:function(t){return me(r,void 0,void 0,function(){var o;return ce(this,function(r){switch(r.label){case 0:return ut(i)?(t.uri.searchParams.set("api-key",i.key),[3,3]):[3,1];case 1:return[4,i.getToken(n)];case 2:o=r.sent(),t.uri.searchParams.set("Authorization","Bearer ".concat(o.token)),r.label=3;case 3:return[2,t]}})})}}},t.prototype.openAISettings=function(t,i){var o=new URL("wss://api.openai.com/v1/realtime");return o.searchParams.set("model",i.model),{uri:o,protocols:["realtime","openai-insecure-api-key.".concat(t.key),"openai-beta.realtime-v1"]}},t.prototype.getWebsocket=function(t){return new zi(t,{validate:function(t){if("string"!=typeof t.data)return ot(Error("Invalid message type"));try{var i=JSON.parse(t.data);return Li(i)?$i(i):ot(Error("Invalid message type"))}catch{return ot(Error("Invalid JSON message"))}},serialize:function(t){return JSON.stringify(t)}})},t.prototype.messages=function(){return Ni(this,arguments,function(){var t,i,o,r,n,a,s,l,c;return ce(this,function(u){switch(u.label){case 0:u.trys.push([0,7,8,13]),t=!0,i=Ri(this.client),u.label=1;case 1:return[4,ge(i.next())];case 2:return(a=(o=u.sent()).done)?[3,6]:(c=o.value,t=!1,[4,ge(r=c)]);case 3:return[4,u.sent()];case 4:u.sent(),u.label=5;case 5:return t=!0,[3,1];case 6:return[3,13];case 7:return s={error:n=u.sent()},[3,13];case 8:return u.trys.push([8,,11,12]),!t&&!a&&(l=i.return)?[4,ge(l.call(i))]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,12];case 11:if(s)throw s.error;return[7];case 12:return[7];case 13:return[2]}})})},t.prototype.send=function(t){return me(this,void 0,void 0,function(){return ce(this,function(i){switch(i.label){case 0:return[4,this.client.send(t)];case 1:return i.sent(),[2]}})})},t.prototype.close=function(){return me(this,void 0,void 0,function(){return ce(this,function(t){switch(t.label){case 0:return[4,this.client.close()];case 1:return t.sent(),[2]}})})},t}();t.store("realtimeChatStatus",{active:!1,conversationStarted:!1,setActive(t){this.active=t,this.onActiveChange()},setConversationStarted(t){this.conversationStarted=t,this.onConversationStartedChange()},onActiveChange(){var t,i;document.querySelectorAll(".lqd-realtime-chat-button").forEach(t=>t.classList.toggle("active",this.active)),null==(i=null==(t=document.querySelector(".lqd-audio-vis-wrap"))?void 0:t.classList)||i.toggle("active",this.active)},onConversationStartedChange(){document.querySelectorAll(".lqd-realtime-chat-button").forEach(t=>{t.classList.toggle("conversation-started",this.conversationStarted),t.classList.toggle("conversation-not-started",!this.conversationStarted)})}});let Yi=(i,o,r)=>({apiKey:"",recordingActive:!1,buffer:new Uint8Array,wsConnection:null,audioRecorder:null,audioPlayer:null,activeVisulaizer:"idle",audioVisWrap:null,audioVisBars:null,audioVisDotWrap:null,audioVisLoader:null,conversationArea:document.querySelector(".conversation-area"),chatsContainer:document.querySelector(".chats-container"),userBubbleTemplate:document.querySelector("#chat_user_bubble"),aiBubbleTemplate:document.querySelector("#chat_ai_bubble"),lastAiBubble:null,lastUserBubble:null,lastUserQuestion:"",lastAiResponse:"",lastResponseSaved:!1,init(){var t,i,o;this.audioVisWrap=document.querySelector(".lqd-audio-vis-wrap"),this.audioVisBars=null==(t=this.audioVisWrap)?void 0:t.querySelectorAll(".lqd-audio-vis-bar"),this.audioVisDotWrap=null==(i=this.audioVisWrap)?void 0:i.querySelector(".lqd-audio-vis-dot-wrap"),this.audioVisLoader=null==(o=this.audioVisWrap)?void 0:o.querySelector(".lqd-audio-vis-loader"),this.processAudioRecordingBuffer=this.processAudioRecordingBuffer.bind(this)},async start(){if(!t.store("realtimeChatStatus").isActive){t.store("realtimeChatStatus").setActive(!0),this.switchVisualizers("waiting"),this.wsConnection=new Xi({key:atob(i)+atob(o)+atob(r)},{model:"gpt-4o-realtime-preview-2024-12-17"});try{await this.wsConnection.send(this.createConfigMessage())}catch(n){this.stop(),console.error("Error sending initial config message:",n),this.appendToChatBubble("ai","[Connection error]: Unable to send initial config message. Please check your endpoint and authentication details.");return}await Promise.all([this.startRecorder(),this.startPlayer()]).then(()=>{this.handleRealtimeMessages(),this.startBarsVisualizer(),this.startDotVisualizer(),this.switchVisualizers("idle")}).catch(t=>{this.stop(),console.error("Error starting recorder and player:",t),this.appendToChatBubble("ai","[Error]: Unable to start audio recorder and player. Please check your microphone permissions and refresh the page.")})}},stop(){!this.lastResponseSaved&&"saveResponseAsync"in window&&""!==this.lastUserQuestion.trim()&&""!==this.lastAiResponse.trim()&&saveResponseAsync(this.lastUserQuestion.trim(),this.lastAiResponse.trim(),document.querySelector("#chat_id").value,"","","",""),this.resetPlayers(),this.wsConnection&&this.wsConnection.close(),this.switchVisualizers(""),t.store("realtimeChatStatus").setActive(!1)},async startPlayer(){try{this.audioPlayer=new Mi,await this.audioPlayer.init(24e3)}catch(t){console.error("Error starting audio player:",t)}},async startRecorder(){try{this.audioRecorder=new Oi(this.processAudioRecordingBuffer);let t=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});await this.audioRecorder.start(t),this.recordingActive=!0}catch(i){console.error("Error starting audio recorder:",i)}},createConfigMessage(){let t={type:"session.update",session:{turn_detection:{type:"server_vad",silence_duration_ms:500},input_audio_transcription:{model:"whisper-1"}}},i=this.getSystemMessage(),o=this.getTemperature(),r=this.getVoice();return i&&(t.session.instructions=i),isNaN(o)||(t.session.temperature=o),r&&(t.session.voice=r),t},async handleRealtimeMessages(){for await(let i of this.wsConnection.messages())switch(i.type,i.type){case"session.created":this.switchVisualizers("idle");break;case"response.content_part.added":this.lastAiResponse="",t.store("realtimeChatStatus").setConversationStarted(!0),this.createChatBubble("ai");break;case"response.audio_transcript.delta":this.lastAiResponse+=i.delta,this.appendToChatBubble("ai",i.delta);break;case"response.audio.delta":{this.switchVisualizers("playing");let o=atob(i.delta),r=Uint8Array.from(o,t=>t.charCodeAt(0)),n=new Int16Array(r.buffer);this.audioPlayer.play(n);break}case"input_audio_buffer.speech_started":this.createChatBubble("user"),this.switchVisualizers("recording"),this.audioPlayer.clear(),this.lastResponseSaved=!1,setTimeout(()=>{this.lastUserQuestion=""},0);break;case"conversation.item.input_audio_transcription.completed":this.lastUserQuestion+=i.transcript,this.appendToChatBubble("user",i.transcript);break;case"response.output_item.done":case"conversation.item.deleted":break;case"conversation.item.truncated":this.appendToChatBubble("ai","...");break;case"response.done":"saveResponseAsync"in window&&(saveResponseAsync(this.lastUserQuestion.trim(),this.lastAiResponse.trim(),document.querySelector("#chat_id").value,"","","",""),this.lastResponseSaved=!0),"formatString"in window&&this.lastAiBubble&&(this.lastAiBubble.innerHTML=formatString(this.lastAiResponse));break;default:JSON.stringify(i,null,2)}this.resetPlayers()},combineArray(t){let i=new Uint8Array(this.buffer.length+t.length);i.set(this.buffer),i.set(t,this.buffer.length),this.buffer=i},processAudioRecordingBuffer(t){let i=new Uint8Array(t);if(this.combineArray(i),this.buffer.length>=4800){let o=new Uint8Array(this.buffer.slice(0,4800));this.buffer=new Uint8Array(this.buffer.slice(4800));let r=String.fromCharCode(...o),n=btoa(r);this.recordingActive&&this.wsConnection.send({type:"input_audio_buffer.append",audio:n})}},async resetPlayers(){var t,i;this.recordingActive=!1,null==(t=this.audioRecorder)||t.stop(),null==(i=this.audioPlayer)||i.clear()},getSystemMessage:()=>"",getTemperature:()=>parseFloat(.8),getVoice:()=>"alloy",switchVisualizers(t){var i;this.activeVisulaizer=t,null==(i=this.audioVisWrap)||i.setAttribute("data-state",this.activeVisulaizer)},createChatBubble(t){let i=("user"===t?this.userBubbleTemplate:this.aiBubbleTemplate).content.cloneNode(!0),o=i.querySelector(".chat-content");this.chatsContainer.appendChild(i),"user"===t?this.lastUserBubble=o:this.lastAiBubble=o,this.scrollConversationAreaToBottom()},appendToChatBubble(t,i){let o="user"===t?this.lastUserBubble:this.lastAiBubble;o?(o.textContent+=i,this.scrollConversationAreaToBottom()):(this.createChatBubble(t),this.appendToChatBubble(t,i))},scrollConversationAreaToBottom(){this.conversationArea.scrollTo({top:this.conversationArea.scrollHeight+200,left:0})},startBarsVisualizer(){var t;if(!(null!=(t=this.audioVisBars)&&t.length))return;let i=this.audioPlayer.audioContext.createAnalyser();i.fftSize=4096;let o=i.frequencyBinCount,r=new Uint8Array(o),n=this.audioVisBars.length;this.audioPlayer.playbackNode.connect(i);let a=[[85,150],[150,250],[250,400],[400,600],[600,1e3]];this.barHeights=this.barHeights||Array(n).fill(0);let s=()=>{i.getByteFrequencyData(r),this.audioVisBars.forEach((t,o)=>{let[n,s]=a[o],l=Math.floor(n/(this.audioPlayer.audioContext.sampleRate/i.fftSize)),c=Math.ceil(s/(this.audioPlayer.audioContext.sampleRate/i.fftSize)),u=0;for(let d=l;d<=c&&d<r.length;d++)r[d]>u&&(u=r[d]);let p=u/255*80;this.barHeights[o]+=(p-this.barHeights[o])*.4,this.barHeights[o]+=(Math.random()-.5)*2,this.barHeights[o]=Math.max(5,Math.min(100,this.barHeights[o])),t.animate([{height:t.style.height},{height:`${this.barHeights[o]}%`}],{duration:30,fill:"forwards",easing:"linear"})}),requestAnimationFrame(s)};s()},startDotVisualizer(){if(!this.audioRecorder||!this.audioVisDotWrap)return;let t=this.audioRecorder.audioContext.createAnalyser();t.fftSize=256;let i=t.frequencyBinCount,o=new Uint8Array(i);this.audioRecorder.getMediaStreamSource().connect(t);let r=this.audioVisDotWrap.querySelector(".lqd-audio-vis-dot");if(!r)return;let n=()=>{t.getByteFrequencyData(o);let a=0;for(let s=0;s<i;s++)a+=o[s];let l=1+a/i/256*1.5;r.style.transform=`scale(${l})`,r.style.opacity=Math.max(.2,1-(l-1)/1.5).toFixed(2),requestAnimationFrame(n)};n()}}),Gi=(t={})=>({prevViews:[],currentView:"home",sidebarCollapsed:!1,modalShow:!1,activeModal:null,activeModalId:null,activeModalIdPrefix:null,currentToolsCat:"primary",predefinedPrompts:t.predefinedPrompts||[],tools:t.tools||[],primaryToolKeys:t.primaryToolKeys||[],uploadingFile:{},showImageDetails:!1,zoomLevel:1,reachedMinZoom:!1,reachedMaxZoom:!1,newItems:[],showNotif:!1,editingImageDimensions:{width:0,height:0},painting:!1,brushSize:40,canvasCtx:null,_busy:!1,_template:"",_prompt:"",_selectedTemplateDescription:"",_selectedPromptDescription:"",_selectedTool:"",_prevEditingImage:{},_editingImage:{},get busy(){return this._busy},set busy(e){this._busy=e},get selectedTemplate(){return this._template.trim()},set selectedTemplate(e){var i;this._template=e,null==(i=this.$refs.promptInput)||i.focus()},get prompt(){return this._prompt},set prompt(e){var o;this._prompt=e.trim(),null==(o=this.$refs.promptInput)||o.focus()},get selectedTemplateDescription(){return this._selectedTemplateDescription},set selectedTemplateDescription(e){this._selectedTemplateDescription!==e&&(this._selectedTemplateDescription=e)},get selectedPromptDescription(){return this._selectedPromptDescription},set selectedPromptDescription(e){this._selectedPromptDescription!==e&&(this._selectedPromptDescription=e)},get selectedTool(){return this._selectedTool},set selectedTool(e){this._selectedTool!==e&&(this._selectedTool=e,this.makeCanvasEditable("sketch_to_image"===this._selectedTool?{width:1024,height:1024}:{}))},get prevEditingImage(){return this._prevEditingImage},get editingImage(){return this._editingImage},set editingImage(e){this._prevEditingImage=this._editingImage,this._editingImage=e,this.showImageDetails=!1,this.zoomLevel=1,fetch(e.output).then(t=>t.blob()).then(t=>{var i,o;let r=new File([t],(null==(o=null==(i=e.title)?void 0:i.split("."))?void 0:o.at(0))||"image",{type:t.type}),n=new DataTransfer;n.items.add(r),this.$refs.uploadedImageInput.files=n.files}).catch(t=>{toastr.error("Failed to load image"),console.error("Error creating file from URL:",t)})},init(){this.onViewChange=this.onViewChange.bind(this),this.onZoomLevelChange=this.onZoomLevelChange.bind(this),this.makeCanvasEditable=this.makeCanvasEditable.bind(this),this.startPainting=this.startPainting.bind(this),this.stopPainting=this.stopPainting.bind(this),this.paint=this.paint.bind(this),document.documentElement.style.scrollbarGutter="stable",this.$watch("currentView",this.onViewChange),this.$watch("zoomLevel",this.onZoomLevelChange)},switchView(t){if("<"===t){this.currentView=this.prevViews.pop()||"home";return}this.prevViews.push(this.currentView),this.currentView=t||"home"},switchSidebarCollapsed(t){if(null!=t){this.sidebarCollapsed=t;return}this.sidebarCollapsed=!this.sidebarCollapsed,this.$nextTick(()=>{this.zoomLevel>1&&this.fitToScreen()}),this.$refs.imageEditorSidebar.addEventListener("transitionend",t=>{t.target!==this.$refs.imageEditorSidebar&&"transform"!==t.propertyName||this.reachedMaxZoom&&this.fitToScreen()})},onViewChange(t){document.documentElement.style.overflow="editor"===t?"hidden":""},setRandomPrompt(){this.prompt=this.predefinedPrompts[Math.floor(Math.random()*this.predefinedPrompts.length)]},setActiveModal(t,i="modal"){this.activeModal=t,this.activeModalId=t.id,this.activeModalIdPrefix=i},prevImageModal(){let t=document.querySelector(`.image-result[data-id='${this.activeModalId}'][data-id-prefix=${this.activeModalIdPrefix}]`),i=null==t?void 0:t.previousElementSibling;if(!i)return;let o=JSON.parse(i.getAttribute("data-payload")||{});this.setActiveModal(o,t.getAttribute("data-id-prefix"))},nextImageModal(){let t=document.querySelector(`.image-result[data-id='${this.activeModalId}'][data-id-prefix=${this.activeModalIdPrefix}]`),i=null==t?void 0:t.nextElementSibling;if(!i)return;let o=JSON.parse(i.getAttribute("data-payload")||{});this.setActiveModal(o,t.getAttribute("data-id-prefix"))},getSelectedToolCat(){return this.getToolCat(this.selectedTool)},switchToolsCat(t={}){return t.cat?this.currentToolsCat=t.cat:t.toolKey?this.currentToolsCat=this.getToolCat(t.toolKey):t.cat||t.toolKey?void 0:this.currentToolsCat="primary"===this.currentToolsCat?"secondary":"primary"},getToolCat(t){return this.primaryToolKeys.findIndex(i=>i===t)>=0?"primary":"secondary"},handleDragOver(){this.$refs.dropArea.classList.add("drag-over")},handleDragLeave(){this.$refs.dropArea.classList.remove("drag-over")},handleDrop(t){let{dataTransfer:i}=t,{files:o}=i;o&&(this.handleFiles(o),this.$refs.dropArea.classList.remove("drag-over"))},handleFileChange(t){let{files:i}=t.target;i&&this.handleFiles(i)},handleFiles(t){let i=t[0];this.editingImage={output:URL.createObjectURL(i),name:i.name},this.$refs.uploadedImageInput.files=t},resetUploadedImageInput(){this.zoomLevel=1,this.editingImage={},this.$refs.editorFileInput.value="",this.$refs.uploadedImageInput.value="","sketch_to_image"===this.selectedTool&&this.makeCanvasEditable({width:1024,height:1024})},downloadImage(t,i){let o=document.createElement("a");o.href=t,o.download=i?i.replaceAll(" ","-"):"image",o.click(),o.remove()},getMaxZoom(){let t=this.$refs.editorCanvas,i=t.offsetWidth,o=window.getComputedStyle(t);return 1+(parseFloat(o.marginLeft)+parseFloat(o.marginRight)-20)/i},setZoomLevel(t){let i=this.getMaxZoom();this.zoomLevel=Math.max(.1,Math.min(i,t)),this.reachedMinZoom=.1===this.zoomLevel,this.reachedMaxZoom=this.zoomLevel>=i},zoomIn(){this.setZoomLevel(this.zoomLevel+.1)},zoomOut(){this.setZoomLevel(this.zoomLevel-.1)},fitToScreen(){let t=this.getMaxZoom();this.setZoomLevel(t)},onZoomLevelChange(){let t=this.$refs.editorCanvas;t.style.setProperty("--zoom-level",this.zoomLevel.toFixed(3)),t.style.setProperty("--zoom-offset","0px");let i=window.getComputedStyle(t),o=parseFloat(i.getPropertyValue("--header-h")),r=t.getBoundingClientRect().top+this.$refs.editorCanvasWrap.scrollTop;r<o&&t.style.setProperty("--zoom-offset",`${(r>=0?o-r:o+Math.abs(r)).toFixed(0)}px`)},submitEditorForm(t){this.busy=!0;let i=new FormData(t.target);fetch(t.target.action,{method:"POST",body:i,headers:{Accept:"application/json"}}).then(t=>{if(!t.ok)throw Error("Network response was not ok");return t.json()}).then(t=>{if("error"===t.status)throw Error(t.message);this.editingImage=t.data,this.newItems.push(t.data),this.showNotif=!0,"sketch_to_image"===this.selectedTool&&(this.switchToolsCat({toolKey:this.primaryToolKeys[0]}),this.selectedTool=this.primaryToolKeys[0]);let i=setTimeout(()=>{this.showNotif=!1,clearTimeout(i)},3e3)}).catch(t=>{console.error(t),toastr.error(t)}).finally(()=>{this.busy=!1})},async makeCanvasEditable(t={}){var i;this.editingImageDimensions={width:t.width||this.$refs.editorImagePreview.naturalWidth,height:t.height||this.$refs.editorImagePreview.naturalHeight},await this.$nextTick();let o=this.$refs.editorMaskCanvas;null==(i=this.canvasCtx)||i.reset(),this.canvasCtx=o.getContext("2d"),this.canvasCtx.fillStyle="black",this.canvasCtx.fillRect(0,0,o.width,o.height)},startPainting(t){this.painting=!0,this.painted=!1,this.paint(t)},stopPainting(){if(!this.painted)return;this.painting=!1,this.canvasCtx.beginPath();let t=this.$refs.editorMaskCanvas,i=document.createElement("canvas");i.width=this.editingImageDimensions.width,i.height=this.editingImageDimensions.height,i.getContext("2d").drawImage(t,0,0,i.width,i.height),i.toBlob(t=>{let o=new File([t],"mask.png",{type:"image/png"}),r=new DataTransfer;r.items.add(o),this.$refs["sketch_to_image"===this.selectedTool?"sketchFileInput":"maskFileInput"].files=r.files,i.remove()},"image/png"),this.painted=!1},paint(t){if(!this.painting)return;let i=this.$refs.editorMaskCanvas,o=i.getBoundingClientRect(),r=(t.clientX-o.left)*(i.width/o.width),n=(t.clientY-o.top)*(i.height/o.height);this.canvasCtx.lineWidth=this.brushSize,this.canvasCtx.lineCap="round",this.canvasCtx.strokeStyle="white",this.canvasCtx.lineTo(r,n),this.canvasCtx.stroke(),this.canvasCtx.beginPath(),this.canvasCtx.moveTo(r,n),this.painted=!0},setBrushSize(t){"-"===t?t=Math.max(this.brushSize-10,10):"+"===t&&(t=Math.min(this.brushSize+10,100)),this.brushSize=parseInt(t,10)}});window.fetchEventSource=i;let Zi=localStorage.getItem("lqdDarkMode"),Qi=localStorage.getItem("docsViewMode"),Ki=localStorage.getItem("lqdNavbarShrinked"),dt=document.querySelector("body").getAttribute("data-theme"),Ji=localStorage.getItem(dt+":lqdFocusModeEnabled");window.collectCreditsToFormData=function(t){document.querySelectorAll('input[name^="entities"]').forEach(i=>{let o=i.name,r="checkbox"===i.type||"radio"===i.type?i.checked:i.value;t.append(o,r)})},window.Alpine=t,t.plugin(o),t.plugin(xi),document.addEventListener("alpine:init",()=>{let i=t.$persist;t.data("modal",t=>Pi(t)),t.data("clipboard",t=>r(t)),t.data("assignViewCredits",t=>ki(t)),t.store("navbarShrink",{active:i(!!Ki).as("lqdNavbarShrinked"),toggle(t){this.active=t?"shrink"===t:!this.active,document.body.classList.toggle("navbar-shrinked",this.active)}}),t.data("navbarItem",()=>({dropdownOpen:!1,toggleDropdownOpen(t){this.dropdownOpen=t?"collapse"===t:!this.dropdownOpen},item:{"x-ref":"item","@mouseenter"(){if(!t.store("navbarShrink").active)return;let i=this.$el.getBoundingClientRect(),o=this.$refs.item.querySelector(".lqd-navbar-dropdown");if(["y","height","bottom"].forEach(t=>this.$refs.item.style.setProperty(`--item-${t}`,`${i[t]}px`)),o){let r=o.getBoundingClientRect();["height"].forEach(t=>this.$refs.item.style.setProperty(`--dropdown-${t}`,`${r[t]}px`))}}}})),t.store("mobileNav",{navCollapse:!0,toggleNav(t){this.navCollapse=t?"collapse"===t:!this.navCollapse},templatesCollapse:!0,toggleTemplates(t){this.templatesCollapse=t?"collapse"===t:!this.templatesCollapse},searchCollapse:!0,toggleSearch(t){this.searchCollapse=t?"collapse"===t:!this.searchCollapse}}),t.store("darkMode",{on:i(!!Zi).as("lqdDarkMode"),toggle(){this.on=!this.on,document.body.classList.toggle("theme-dark",this.on),document.body.classList.toggle("theme-light",!this.on)}}),t.store("appLoadingIndicator",{showing:!1,show(){this.showing=!0},hide(){this.showing=!1},toggle(){this.showing=!this.showing}}),t.store("docsViewMode",{docsViewMode:i(Qi||"list").as("docsViewMode"),change(t){this.docsViewMode=t}}),t.store("generatorsFilter",{init(){let t=new URLSearchParams(window.location.search);this.filter=t.get("filter")||"all"},filter:"all",changeFilter(t){if(this.filter!==t){if(!document.startViewTransition)return this.filter=t;document.startViewTransition(()=>this.filter=t)}}}),t.store("documentsFilter",{init(){let t=new URLSearchParams(window.location.search);this.sort=t.get("sort")||"created_at",this.sortAscDesc=t.get("sortAscDesc")||"desc",this.filter=t.get("filter")||"all",this.page=t.get("page")||"1"},sort:"created_at",sortAscDesc:"desc",filter:"all",page:"1",changeSort(t){t===this.sort?this.sortAscDesc="desc"===this.sortAscDesc?"asc":"desc":this.sortAscDesc="desc",this.sort=t},changeAscDesc(t){this.ascDesc!==t&&(this.ascDesc=t)},changeFilter(t){this.filter!==t&&(this.filter=t)},changePage(t){(">"===t||"<"===t)&&(t=">"===t?Number(this.page)+1:Number(this.page)-1),this.page!==t&&(this.page=t)}}),t.store("chatsFilter",{init(){let t=new URLSearchParams(window.location.search);this.filter=t.get("filter")||"all",this.setSearchStr(t.get("search")||"")},searchStr:"",setSearchStr(t){this.searchStr=t.trim().toLowerCase()},filter:"all",changeFilter(t){if(this.filter!==t){if(!document.startViewTransition)return this.filter=t;document.startViewTransition(()=>this.filter=t)}}}),t.data("generatorV2",()=>({itemsSearchStr:"",setItemsSearchStr(t){this.itemsSearchStr=t.trim().toLowerCase(),""!==this.itemsSearchStr?this.$el.closest(".lqd-generator-sidebar").classList.add("lqd-showing-search-results"):this.$el.closest(".lqd-generator-sidebar").classList.remove("lqd-showing-search-results")},sideNavCollapsed:!1,toggleSideNavCollapse(t){var i;this.sideNavCollapsed=t?"collapse"===t:!this.sideNavCollapsed,this.sideNavCollapsed&&(null==(i=null==tinymce?void 0:tinymce.activeEditor)||i.focus())},generatorStep:0,setGeneratorStep(t){if(t!==this.generatorStep){if(!document.startViewTransition)return this.generatorStep=Number(t);document.startViewTransition(()=>this.generatorStep=Number(t))}},selectedGenerator:null})),t.store("mobileChat",{sidebarOpen:!1,toggleSidebar(t){this.sidebarOpen=!t&&!this.sidebarOpen}}),t.data("dropdown",({triggerType:t="hover"})=>({open:!1,toggle(t){this.open=t?"collapse"!==t:!this.open,this.$refs.parent.classList.toggle("lqd-is-active",this.open)},parent:{"@mouseenter"(){"hover"===t&&this.toggle("expand")},"@mouseleave"(){"hover"===t&&this.toggle("collapse")},"@click.outside"(){this.toggle("collapse")}},trigger:{"@click.prevent"(){"click"===t&&this.toggle()}},dropdown:{}})),t.store("notifications",{notifications:[],loading:!1,add(t){this.notifications.unshift(t)},remove(t){this.notifications.splice(t,1)},markThenHref(t){let i=this.notifications.indexOf(t);if(-1!==i){var o=new FormData;o.append("id",t.id),this.loading=!0,$.ajax({url:"/dashboard/notifications/mark-as-read",type:"POST",data:o,cache:!1,contentType:!1,processData:!1,success(t){},error(t){console.error(t)},complete:()=>{this.markAsRead(i),window.location=t.link,this.loading=!1}})}},markAsRead(t){this.notifications=this.notifications.map((i,o)=>(o===t&&(i.unread=!1),i))},markAllAsRead(){this.loading=!0,$.ajax({url:"/dashboard/notifications/mark-as-read",type:"POST",success:t=>{t.success&&this.notifications.forEach((t,i)=>{this.markAsRead(i)})},error(t){console.error(t)},complete:()=>{this.loading=!1}})},setNotifications(t){this.notifications=t},hasUnread:function(){return this.notifications.some(t=>t.unread)}}),t.data("notifications",t=>({notifications:t||[]})),t.store("focusMode",{active:t.$persist(!!Ji).as(dt+":lqdFocusModeEnabled"),toggle(t){console.log(dt),this.active=t?"activate"===t:!this.active,document.body.classList.toggle("focus-mode",this.active)}}),t.data("openaiRealtime",Yi),t.data("advancedImageEditor",Gi)}),n.start();